//************************************************************************************************************************
// AsyncPushButton.ino
// Version 1.0 February, 2020
// Author Gerald Guiony
//************************************************************************************************************************

#include <Common.h>
#include <Switches/PushButton.h>


#define PUSH_BUTTON_PIN		D1


ASYNC_PUSHBUTTON_CLASS (Test, I(LoopScheduler).wakeUp ())



//========================================================================================================================
//
//========================================================================================================================
void setup()
{

	// ------------ Global Init

	initSketch();

	// ------------- Setup

	I(PushButtonTest).setup (PUSH_BUTTON_PIN);

	I(PushButtonTest).notifyPressedState += []() {
		Logln(F("Button is pressed"));
	};

	I(LoopScheduler).setup ({ &I(PushButtonTest) });
}

//========================================================================================================================
//
//========================================================================================================================
void loop()
{
	I(LoopScheduler).loop ();
}
